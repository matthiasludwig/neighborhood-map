<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Crimemap Map | View Police Incidents in SF, California</title>
        <meta name="description" content="TODO">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/grd.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="fonts/ss-social-circle.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body data-bind="css: { loadingCursor: loadingState}">
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div class="Grid">
            <div class="Cell -2of12" id="nav">
                <!-- Hamburger Menu (not visible until Breakpoint is hit) -->
                <div id="toggle"><i class="fa fa-bars fa-2x"></i></div>
                <div class="sidebar">
                    <div class="logospace">
                        <img class="logo" src="icons/logo.png" alt="Crimemap logo">
                    </div>
                    <div id="loadingData" data-bind="visible: loadingState"><i class="fa fa-cog fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span></div> <!-- Loading Animation -->
                    <div data-bind="visible: !loadingState()">
                        <div class="menu">
                            <div id="logos">
                                <a href="https://www.facebook.com/matthiasludw" target="_blank" id="facebook"><i class="ss-icon">facebook</i></a>
                                &nbsp;<a href="https://www.twitter.com/matthiasludw" target="_blank" id="twitter"><i class="ss-icon">twitter</i></a>
                                &nbsp;<a href="https://www.linkedin.com/in/ludwigmatthias" target="_blank" id="linkedin"><i class="ss-icon">linkedin</i></a>
                                &nbsp;<a href="https://github.com/matthiasludwig" target="_blank" id="github"><i class="ss-icon">github</i></a>
                            </div>
                        </div>
                        <div class="menu">
                            <p class="menuButton"><i class="fa fa-info-circle" aria-hidden="true">&nbsp;</i>About</p>
                            <div class="collapsable">
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                            </div>
                        </div>
                        <div class="menu">
                            <p class="menuButton"><i class="fa fa-cogs" aria-hidden="true">&nbsp;</i>Settings</p>
                            <div class="collapsable">
                                <div class="innerContent">
                                    <p class="subHeading"><i class="fa fa-filter" aria-hidden="true"></i> - Filter by police district</p>
                                    <select data-bind="options: policeDistricts, value: filter"></select>
                                    <br>
                                    <p><span data-bind="text: filter"></span>&nbsp;<span data-bind="text: numberIncidents"></span><br><span data-bind="text: percentageIncidents"></span></p>
                                    <hr>
                                    <p class="subHeading"><i class="fa fa-calendar-o" aria-hidden="true"></i> - Adjust date</p>
                                    <form data-bind="submit: newData">
                                        <p class="optionHeading">From: </p>
                                        <input type="date" pattern="\d*" name="date" data-bind="value: fromDate">
                                        <p class="optionHeading">To: </p>
                                        <input type="date" pattern="\d*" name="date" data-bind="value: toDate">
                                        <hr class="subDivider">
                                        <span>Limit: </span><input type="number" pattern="\d*" name="quantity" min="0" max="3500" step="100" data-bind="value: apiLimit"><br>
                                        <p class="tipContent">A high limit might slow down the browser.<br>3500 is the current limit of incidents per request.</p>
                                        <br>
                                        <button type="submit">Update</button>
                                    </form>
                                    <br>
                                </div>
                            </div>
                        </div>
                        <!-- Crime Data List -->
                        <div class="menu">
                            <p class="menuButton"><i class="fa fa-list" aria-hidden="true">&nbsp;</i>Results</p>
                            <div class="collapsable" id="resultList">
                                <ul class="item" data-bind="foreach: filteredData ">
                                    <li class="listItem" data-bind="event: { mouseover: $parent.mouseOver, mouseout: $parent.mouseOut, click: $parent.clickItem}, css: { 'itemSelect': marker.pdid === selectedItem() }"><span data-bind="text: marker.address"></span>: <span data-bind="text: marker.category"></span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Google Maps starts here -->
            <div class="Cell -10of12" id="map"></div>
        </div>

        <!-- Load custom JavaScript and Frameworks (jQuery and KO) as well as the Google Maps JS API-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

        <script src="js/plugins.js"></script>
        <script src="fonts/ss-social.js"></script>
        <script src="js/vendor/knockout.js"></script>
        <script src="js/vendor/knockout-projections.min.js"></script>
        <script src="js/vendor/moment.min.js"></script>
        <script src="js/app.js"></script>
        <script src="js/view.js"></script>
        <script src="js/helper.js"></script>
        <script src="js/menu.js"></script>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAgKZclTlBcjeCW3cS8uMzbVOB6f6Act3A&libraries=geometry&callback=init" onerror="googleError()" async defer></script>
    </body>
</html>
